vision_analysis_task:
  description: >
    Analyze {num_images} images of {brand} {model}.
    Images: {image_urls}
    
    Assess condition (0-10), detect physical issues, verify authenticity (0-100).
    Return clean JSON with condition_score, condition, detected_issues array, authenticity object.
    NO reasoning field.
    
  expected_output: >
    Clean JSON object with: condition_score (number 0-10), condition (string), detected_issues (array), authenticity (object with score 0-100 and is_authentic boolean).
  agent: vision_agent

text_analysis_task:
  description: >
    Evaluate description: "{description}"
    Phone: {brand} {model}, {storage}, Box: {has_box}, Warranty: {has_warranty}
    
    Rate quality, assess completeness percentage, identify 3-5 specific missing details.
    NO strengths, suggestions, or reasoning fields.
    
  expected_output: >
    Clean JSON object with: description_quality (string: excellent/good/fair/poor), completeness (number 0-100), missing_information (array of 3-5 strings).
  agent: text_agent
  context:
    - vision_analysis_task

pricing_analysis_task:
  description: >
    Determine fair market price for {brand} {model} ({storage}, {age_months} months old, launched {launch_date}).
    Original retail: {retail_price} PKR. PTA Approved: {pta_approved}.
    
    **IMPORTANT PRICING GUIDELINES:**
    1. Start with retail price depreciation:
       - Year 1: 25% depreciation
       - Year 2: 20% depreciation  
       - Year 3+: 15% depreciation per year
    
    2. Apply condition adjustments from vision analysis:
       - Excellent (9-10): No additional reduction
       - Good (7-8): Reduce by 10-15%
       - Fair (5-6): Reduce by 20-30%
       - Poor (3-4): Reduce by 35-50%
    
    3. **PTA Status Impact (CRITICAL for Pakistan market):**
       - If PTA Approved (pta_approved=true): Use calculated price
       - If Non-PTA (pta_approved=false): Apply 30-40% reduction from PTA price
       - Non-PTA phones cannot use SIM cards legally in Pakistan, significantly reducing value
    
    4. Market reality check:
       - Aim for middle-ground pricing (not too high, not too low)
       - Target 15-18K PKR range for mid-range phones (adjust proportionally for high-end)
       - Consider Pakistani purchasing power and local market conditions
       - Cross-reference with OLX/PriceOye data for similar models
    
    Provide realistic, competitive prices that balance seller satisfaction with buyer appeal.
    NO pricing_breakdown, reasoning, or market_insights fields.
    
  expected_output: >
    Clean JSON object with: suggested_min_price (integer PKR), suggested_max_price (integer PKR), market_average (integer PKR), confidence_level (string: low/medium/high), pta_impact_applied (boolean).
  agent: pricing_agent
  context:
    - vision_analysis_task
    - text_analysis_task
